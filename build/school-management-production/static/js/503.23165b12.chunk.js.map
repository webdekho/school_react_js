{"version":3,"file":"static/js/503.23165b12.chunk.js","mappings":"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","sources":["pages/admin/StaffWalletManagement.js"],"sourcesContent":["import React, { useState, useCallback } from 'react';\nimport { Card, Row, Col, Table, Button, Modal, Form, Badge, Alert, Spinner } from 'react-bootstrap';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport toast from 'react-hot-toast';\nimport { apiService } from '../../services/api';\n\n// Utility function for formatting currency\nconst formatCurrency = (amount) => {\n  return new Intl.NumberFormat('en-IN', {\n    style: 'currency',\n    currency: 'INR',\n  }).format(amount || 0);\n};\n\nconst StaffWalletManagement = () => {\n  const [showWithdrawModal, setShowWithdrawModal] = useState(false);\n  const [showLedgerModal, setShowLedgerModal] = useState(false);\n  const [selectedStaff, setSelectedStaff] = useState(null);\n  const [withdrawData, setWithdrawData] = useState({\n    amount: '',\n    description: '',\n    payment_method: 'cash'\n  });\n  const [searchTerm, setSearchTerm] = useState('');\n  const queryClient = useQueryClient();\n\n  // Fetch wallet data\n  const { \n    data: walletsData, \n    isLoading: walletsLoading, \n    error: walletsError \n  } = useQuery({\n    queryKey: ['staff_wallets', searchTerm],\n    queryFn: async () => {\n      const params = new URLSearchParams();\n      if (searchTerm) {\n        params.append('search', searchTerm);\n      }\n      const response = await apiService.get(`/api/admin/staff-wallets?${params.toString()}`);\n      return response.data;\n    }\n  });\n\n  // Fetch wallet statistics\n  const { \n    data: statsData, \n    isLoading: statsLoading \n  } = useQuery({\n    queryKey: ['wallet_statistics'],\n    queryFn: async () => {\n      const response = await apiService.get('/api/admin/wallet-statistics');\n      return response.data;\n    }\n  });\n\n  // Fetch ledger for selected staff\n  const { \n    data: ledgerData, \n    isLoading: ledgerLoading \n  } = useQuery({\n    queryKey: ['staff_ledger', selectedStaff?.staff_id],\n    queryFn: async () => {\n      if (!selectedStaff) return null;\n      const response = await apiService.get(`/api/admin/staff-wallet-ledger/${selectedStaff.staff_id}`);\n      return response.data;\n    },\n    enabled: !!selectedStaff\n  });\n\n  // Process withdrawal mutation\n  const withdrawMutation = useMutation({\n    mutationFn: async (data) => {\n      return await apiService.post(`/api/admin/process-withdrawal/${selectedStaff.staff_id}`, data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries(['staff_wallets']);\n      queryClient.invalidateQueries(['wallet_statistics']);\n      toast.success('Withdrawal processed successfully!');\n      setShowWithdrawModal(false);\n      setWithdrawData({ amount: '', description: '', payment_method: 'cash' });\n    },\n    onError: (error) => {\n      toast.error(error.response?.data?.message || 'Failed to process withdrawal');\n    }\n  });\n\n  // Clear balance mutation\n  const clearBalanceMutation = useMutation({\n    mutationFn: async (staffId) => {\n      return await apiService.post(`/api/admin/clear-wallet-balance/${staffId}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries(['staff_wallets']);\n      queryClient.invalidateQueries(['wallet_statistics']);\n      toast.success('Balance cleared successfully!');\n    },\n    onError: (error) => {\n      toast.error(error.response?.data?.message || 'Failed to clear balance');\n    }\n  });\n\n  const handleWithdraw = useCallback((staff) => {\n    setSelectedStaff(staff);\n    setShowWithdrawModal(true);\n  }, []);\n\n  const handleViewLedger = useCallback((staff) => {\n    setSelectedStaff(staff);\n    setShowLedgerModal(true);\n  }, []);\n\n  const handleClearBalance = useCallback((staff) => {\n    if (window.confirm(`Are you sure you want to clear the entire balance of â‚¹${staff.current_balance} for ${staff.staff_name}?`)) {\n      clearBalanceMutation.mutate(staff.staff_id);\n    }\n  }, [clearBalanceMutation]);\n\n  const handleSubmitWithdrawal = (e) => {\n    e.preventDefault();\n    withdrawMutation.mutate(withdrawData);\n  };\n\n  if (walletsError) {\n    return (\n      <Alert variant=\"danger\">\n        Error loading wallet data: {walletsError.message}\n      </Alert>\n    );\n  }\n\n  const wallets = walletsData?.data || [];\n  const statistics = statsData?.data || {};\n\n  return (\n    <div>\n      {/* Header */}\n      <div className=\"d-flex justify-content-between align-items-center mb-4\">\n        <h2 className=\"mb-0\">Staff Wallet Management</h2>\n      </div>\n\n      {/* Statistics Cards */}\n      {!statsLoading && statistics.totals && (\n        <Row className=\"mb-4\">\n          <Col md={3}>\n            <Card className=\"h-100\">\n              <Card.Body className=\"text-center\">\n                <i className=\"bi bi-wallet2 text-primary fs-1 mb-2\"></i>\n                <h4>{formatCurrency(statistics.totals.total_balance || 0)}</h4>\n                <p className=\"text-muted mb-0\">Total Balance</p>\n              </Card.Body>\n            </Card>\n          </Col>\n          <Col md={3}>\n            <Card className=\"h-100\">\n              <Card.Body className=\"text-center\">\n                <i className=\"bi bi-arrow-down-circle text-success fs-1 mb-2\"></i>\n                <h4>{formatCurrency(statistics.totals.total_collected || 0)}</h4>\n                <p className=\"text-muted mb-0\">Total Collected</p>\n              </Card.Body>\n            </Card>\n          </Col>\n          <Col md={3}>\n            <Card className=\"h-100\">\n              <Card.Body className=\"text-center\">\n                <i className=\"bi bi-arrow-up-circle text-warning fs-1 mb-2\"></i>\n                <h4>{formatCurrency(statistics.totals.total_withdrawn || 0)}</h4>\n                <p className=\"text-muted mb-0\">Total Withdrawn</p>\n              </Card.Body>\n            </Card>\n          </Col>\n          <Col md={3}>\n            <Card className=\"h-100\">\n              <Card.Body className=\"text-center\">\n                <i className=\"bi bi-people text-info fs-1 mb-2\"></i>\n                <h4>{statistics.totals.total_wallets || 0}</h4>\n                <p className=\"text-muted mb-0\">Active Wallets</p>\n              </Card.Body>\n            </Card>\n          </Col>\n        </Row>\n      )}\n\n      {/* Search and Filters */}\n      <Card className=\"mb-4\">\n        <Card.Body>\n          <Row>\n            <Col md={6}>\n              <Form.Group>\n                <Form.Label>Search Staff</Form.Label>\n                <Form.Control\n                  type=\"text\"\n                  placeholder=\"Search by name, mobile, or email...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                />\n              </Form.Group>\n            </Col>\n          </Row>\n        </Card.Body>\n      </Card>\n\n      {/* Wallets Table */}\n      <Card>\n        <Card.Header>\n          <h5 className=\"mb-0\">Staff Wallets</h5>\n        </Card.Header>\n        <Card.Body>\n          {walletsLoading ? (\n            <div className=\"text-center py-4\">\n              <Spinner animation=\"border\" />\n            </div>\n          ) : (\n            <div className=\"table-responsive\">\n              <Table striped hover>\n                <thead>\n                  <tr>\n                    <th>Staff Name</th>\n                    <th>Contact</th>\n                    <th>Current Balance</th>\n                    <th>Total Collected</th>\n                    <th>Total Withdrawn</th>\n                    <th>Last Transaction</th>\n                    <th>Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {wallets.length === 0 ? (\n                    <tr>\n                      <td colSpan=\"7\" className=\"text-center\">\n                        No wallet data found\n                      </td>\n                    </tr>\n                  ) : (\n                    wallets.map((wallet) => (\n                      <tr key={wallet.staff_id}>\n                        <td>\n                          <div>\n                            <strong>{wallet.staff_name}</strong>\n                          </div>\n                        </td>\n                        <td>\n                          <div>\n                            <small className=\"text-muted\">{wallet.mobile}</small>\n                            <br />\n                            <small className=\"text-muted\">{wallet.email}</small>\n                          </div>\n                        </td>\n                        <td>\n                          <Badge \n                            bg={wallet.current_balance > 0 ? 'success' : 'secondary'}\n                            className=\"fs-6\"\n                          >\n                            {formatCurrency(wallet.current_balance)}\n                          </Badge>\n                        </td>\n                        <td>{formatCurrency(wallet.total_collected)}</td>\n                        <td>{formatCurrency(wallet.total_withdrawn)}</td>\n                        <td>\n                          <small className=\"text-muted\">\n                            {wallet.last_transaction_at ? \n                              new Date(wallet.last_transaction_at).toLocaleString() : \n                              'No transactions'\n                            }\n                          </small>\n                        </td>\n                        <td>\n                          <div className=\"d-flex gap-2\">\n                            <Button\n                              size=\"sm\"\n                              variant=\"outline-primary\"\n                              onClick={() => handleViewLedger(wallet)}\n                            >\n                              <i className=\"bi bi-journal-text\"></i>\n                            </Button>\n                            {wallet.current_balance > 0 && (\n                              <>\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"outline-warning\"\n                                  onClick={() => handleWithdraw(wallet)}\n                                >\n                                  <i className=\"bi bi-cash-stack\"></i>\n                                </Button>\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"outline-danger\"\n                                  onClick={() => handleClearBalance(wallet)}\n                                  disabled={clearBalanceMutation.isLoading}\n                                >\n                                  <i className=\"bi bi-x-circle\"></i>\n                                </Button>\n                              </>\n                            )}\n                          </div>\n                        </td>\n                      </tr>\n                    ))\n                  )}\n                </tbody>\n              </Table>\n            </div>\n          )}\n        </Card.Body>\n      </Card>\n\n      {/* Withdrawal Modal */}\n      <Modal show={showWithdrawModal} onHide={() => setShowWithdrawModal(false)}>\n        <Modal.Header closeButton>\n          <Modal.Title>Process Withdrawal</Modal.Title>\n        </Modal.Header>\n        <Form onSubmit={handleSubmitWithdrawal}>\n          <Modal.Body>\n            {selectedStaff && (\n              <div className=\"mb-3\">\n                <strong>Staff:</strong> {selectedStaff.staff_name}<br />\n                <strong>Available Balance:</strong> {formatCurrency(selectedStaff.current_balance)}\n              </div>\n            )}\n            <Form.Group className=\"mb-3\">\n              <Form.Label>Amount *</Form.Label>\n              <Form.Control\n                type=\"number\"\n                step=\"0.01\"\n                max={selectedStaff?.current_balance}\n                value={withdrawData.amount}\n                onChange={(e) => setWithdrawData({...withdrawData, amount: e.target.value})}\n                required\n              />\n            </Form.Group>\n            <Form.Group className=\"mb-3\">\n              <Form.Label>Payment Method</Form.Label>\n              <Form.Select\n                value={withdrawData.payment_method}\n                onChange={(e) => setWithdrawData({...withdrawData, payment_method: e.target.value})}\n              >\n                <option value=\"cash\">Cash</option>\n                <option value=\"bank_transfer\">Bank Transfer</option>\n                <option value=\"cheque\">Cheque</option>\n              </Form.Select>\n            </Form.Group>\n            <Form.Group className=\"mb-3\">\n              <Form.Label>Description</Form.Label>\n              <Form.Control\n                as=\"textarea\"\n                rows={3}\n                value={withdrawData.description}\n                onChange={(e) => setWithdrawData({...withdrawData, description: e.target.value})}\n                placeholder=\"Optional description for this withdrawal...\"\n              />\n            </Form.Group>\n          </Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"secondary\" onClick={() => setShowWithdrawModal(false)}>\n              Cancel\n            </Button>\n            <Button \n              variant=\"warning\" \n              type=\"submit\" \n              disabled={withdrawMutation.isLoading}\n            >\n              {withdrawMutation.isLoading ? 'Processing...' : 'Process Withdrawal'}\n            </Button>\n          </Modal.Footer>\n        </Form>\n      </Modal>\n\n      {/* Ledger Modal */}\n      <Modal show={showLedgerModal} onHide={() => setShowLedgerModal(false)} size=\"lg\">\n        <Modal.Header closeButton>\n          <Modal.Title>\n            Staff Ledger - {selectedStaff?.staff_name}\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          {ledgerLoading ? (\n            <div className=\"text-center\">\n              <Spinner animation=\"border\" />\n            </div>\n          ) : (\n            <div className=\"table-responsive\">\n              <Table striped hover size=\"sm\">\n                <thead>\n                  <tr>\n                    <th>Date</th>\n                    <th>Type</th>\n                    <th>Amount</th>\n                    <th>Balance</th>\n                    <th>Description</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {ledgerData?.data?.length === 0 ? (\n                    <tr>\n                      <td colSpan=\"5\" className=\"text-center\">\n                        No transactions found\n                      </td>\n                    </tr>\n                  ) : (\n                    ledgerData?.data?.map((transaction) => (\n                      <tr key={transaction.id}>\n                        <td>\n                          <small>\n                            {new Date(transaction.transaction_date).toLocaleDateString()}\n                          </small>\n                        </td>\n                        <td>\n                          <Badge bg={transaction.transaction_type === 'collection' ? 'success' : 'warning'}>\n                            {transaction.transaction_type}\n                          </Badge>\n                        </td>\n                        <td className={transaction.amount >= 0 ? 'text-success' : 'text-danger'}>\n                          {transaction.amount >= 0 ? '+' : ''}{formatCurrency(Math.abs(transaction.amount))}\n                        </td>\n                        <td>{formatCurrency(transaction.balance)}</td>\n                        <td>\n                          <small>{transaction.description}</small>\n                        </td>\n                      </tr>\n                    ))\n                  )}\n                </tbody>\n              </Table>\n            </div>\n          )}\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={() => setShowLedgerModal(false)}>\n            Close\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </div>\n  );\n};\n\nexport default StaffWalletManagement;"],"names":["formatCurrency","amount","Intl","NumberFormat","style","currency","format","StaffWalletManagement","_ledgerData$data","_ledgerData$data2","showWithdrawModal","setShowWithdrawModal","useState","showLedgerModal","setShowLedgerModal","selectedStaff","setSelectedStaff","withdrawData","setWithdrawData","description","payment_method","searchTerm","setSearchTerm","queryClient","useQueryClient","data","walletsData","isLoading","walletsLoading","error","walletsError","useQuery","queryKey","queryFn","async","params","URLSearchParams","append","apiService","get","toString","statsData","statsLoading","ledgerData","ledgerLoading","staff_id","enabled","withdrawMutation","useMutation","mutationFn","post","onSuccess","invalidateQueries","toast","success","onError","_error$response","_error$response$data","response","message","clearBalanceMutation","staffId","_error$response2","_error$response2$data","handleWithdraw","useCallback","staff","handleViewLedger","handleClearBalance","window","confirm","current_balance","staff_name","mutate","_jsxs","Alert","variant","children","wallets","statistics","_jsx","className","totals","Row","Col","md","Card","Body","total_balance","total_collected","total_withdrawn","total_wallets","Form","Group","Label","Control","type","placeholder","value","onChange","e","target","Header","Spinner","animation","Table","striped","hover","length","colSpan","map","wallet","mobile","email","Badge","bg","last_transaction_at","Date","toLocaleString","Button","size","onClick","_Fragment","disabled","Modal","show","onHide","closeButton","Title","onSubmit","preventDefault","step","max","required","Select","as","rows","Footer","transaction","transaction_date","toLocaleDateString","transaction_type","Math","abs","balance","id"],"sourceRoot":""}